{{!-- <h1 class="center-align">User Profile</h1> --}}

{{#if user}}
  <!-- Display Add Post and View All Posts Links -->
  <div class="row center-align">
    <div class="col s12">
      <a href="/posts" class="waves-effect waves-light btn blue">View All Posts</a>
      <a
        href="/add-post?userid={{user.id}}"
        class="waves-effect waves-light btn green"
      >Add New Post</a>
    </div>
  </div>

  <!-- Display Profile Details -->
  <div class="row">
    <div class="col s12 m6 offset-m3">
      <div class="card blue-grey darken-1">
        <div class="card-content blue-grey darken-1 white-text">
          <span class="card-title">Profile Details</span>
          <ul class="collection">
             <li class="collection-item"><strong>Name:</strong>
              {{user.name}}</li>
            <li class="collection-item"><strong>Email:</strong>
              {{user.email}}</li>
            <li class="collection-item"><strong>Bio:</strong> {{user.bio}}</li>
          </ul>
        </div>
        <div class="card-action">
          <a
            href="/update-profile/{{user.id}}"
            class="btn waves-effect waves-light orange"
          >Edit Profile</a>
        </div>
      </div>
    </div>
  </div>
  <!-- Display User Posts -->
        {{#if user.posts}}
            <div class="row">
                <div class="col s12 m8 offset-m2">
                    <ul class="collection">
                        {{#each user.posts}}
                            <li class="collection-item avatar">
                                {{#if this.image_url}}
                                    <img src="{{this.image_url}}" alt="Post Image" class="circle">
                                {{else}}
                                    <i class="material-icons circle blue">insert_photo</i>
                                {{/if}}
                                <span class="title">{{this.title}}</span>
                                <p>{{this.post_contents}}</p>
                                <p class="secondary-content">{{formatDate this.date}}</p>
                                <a href="/post/{{this.id}}/comments">View Comments</a>
                                <br>
                                <a href="javascript:void(0)" class="red-text delete-post" data-post-id="{{this.id}}">Delete Post</a>
                            </li>
                        {{/each}}
                    </ul>
                </div>
            </div>
        {{else}}
            <p>No posts found.</p>
        {{/if}}

{{else}}
  <div class="row">
    <div class="col s12 m8 offset-m2 center-align">
      <p>User data not available. Please log in.</p>
    </div>
  </div>
{{/if}}
<script src="/js/delete-post.js"></script>